import{B as y,S as b}from"./Spinner.29f6e7a9.js";import{B as v}from"./BaseButton.3c58cd34.js";import{i as C}from"./vue-countdown.esm.28b7ccf0.js";import{d as S,D as T,H as V,E as L,_ as P,r as a,o as d,c as l,f as s,t as c,j as R,a as r,w as u,h as I,b as i,k as m,v as f,p as O,e as $}from"./index.23bbb581.js";const p=T(),q=S({name:"AuthView",components:{BaseTextInput:y,BaseButton:v,Spinner:b,VueCountdown:C},data:()=>({form:{otp:""},isLoading:!1,counting:!1,inputFieldProps:{pattern:"[0-9]",type:"number"},apiResponse:{message:"",token:""}}),computed:{disabledState(){return this.isLoading===!0},apiResponseMsg(){return this.apiResponse.message}},methods:{requestPasswordReset(){console.log("requested")},requestNewToken(){console.log("requested")},startCountdown:function(){this.counting=!0},onCountdownEnd:function(){this.counting=!1},async confirmOtp(){try{const{otp:e}=this.form,o=await V("confirm-account-token");this.isLoading=!0;const{data:n}=await L.post("/auth/verify-otp",{otp:e},{headers:{Authorization:`Bearer ${o}`}});if(console.log(JSON.stringify(n)),n.success){this.$router.push({name:"set-new-password"}),p.success(n.message);return}else p.error(n.message);this.isLoading=!1}catch(e){this.isLoading=!1;const{data:o}=e.response;o.success||p.error(o.message)}},goBack(){this.$router.go(-1)}}});const _=e=>(O("data-v-5e0f42a3"),e=e(),$(),e),E={id:"password__reset__confirm__otp__page"},X={class:"container"},z=_(()=>s("div",null,null,-1)),D=_(()=>s("div",{class:"title"},[s("h1",null,"Confirm OTP"),s("p",{class:"sub__hero__text"},"Confirm the token sent to your email")],-1)),N={class:"error"},x={style:{"font-size":"13px"}},M={key:1,class:"goto__sign__up"},A={class:"goto__sign__up"};function F(e,o,n,U,j,G){const g=a("BaseTextInput"),h=a("Spinner"),w=a("BaseButton"),B=a("VueCountdown"),k=a("RouterLink");return d(),l("div",E,[s("div",X,[z,s("div",null,[D,s("small",N,c(e.apiResponseMsg),1),s("form",{action:"",method:"post",onSubmit:o[2]||(o[2]=R((...t)=>e.confirmOtp&&e.confirmOtp(...t),["prevent"]))},[r(g,{placeholder:"XXXXXX",label:"Token",modelValue:e.form.otp,"onUpdate:modelValue":o[0]||(o[0]=t=>e.form.otp=t),type:"text",maxlength:6,class:"field","input-attributes":e.inputFieldProps,disabled:e.counting||e.isLoading},null,8,["modelValue","input-attributes","disabled"]),r(w,{text:"",disabled:e.disabledState},{default:u(()=>[m(s("span",null,"Proceed",512),[[f,!e.isLoading]]),m(r(h,{"animation-duration":1e3,size:30,color:"#ffffff"},null,512),[[f,e.isLoading]])]),_:1},8,["disabled"]),e.counting?(d(),I(B,{key:0,time:6e4,onEnd:e.onCountdownEnd,style:{color:"var(--secondary)"}},{default:u(({seconds:t})=>[s("small",null,[i(" Request new OTP after "),s("strong",x,c(t),1),i(" seconds. ")])]),_:1},8,["onEnd"])):(d(),l("button",M,[i(" Didn't receive any token? "),s("small",{class:"emphasis",style:{"font-size":"13px"},onClick:o[1]||(o[1]=(...t)=>e.startCountdown&&e.startCountdown(...t))},"request new ")]))],32),s("button",A,[i(" Go back "),r(k,{to:{name:"sign-up"},class:"emphasis",style:{"font-size":"13px"}},{default:u(()=>[i("Sign Up ")]),_:1})])])])])}const W=P(q,[["render",F],["__scopeId","data-v-5e0f42a3"]]);export{W as default};
