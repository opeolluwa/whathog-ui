import{B as y,S as b}from"./Spinner.29f6e7a9.js";import{B as v}from"./BaseButton.3c58cd34.js";import{i as C}from"./vue-countdown.esm.28b7ccf0.js";import{d as S,D as V,H as T,E as L,_ as I,r as a,o as d,c as l,f as o,t as c,j as O,a as r,w as u,h as R,b as i,k as m,v as f,p as $,e as q}from"./index.23bbb581.js";const p=V(),E=S({name:"AuthView",components:{BaseTextInput:y,BaseButton:v,Spinner:b,VueCountdown:C},data:()=>({form:{otp:""},isLoading:!1,counting:!1,inputFieldProps:{pattern:"[0-9]",type:"number"},apiResponse:{message:"",token:""}}),computed:{disabledState(){return this.isLoading===!0},apiResponseMsg(){return this.apiResponse.message}},methods:{requestPasswordReset(){console.log("requested")},requestNewToken(){console.log("requested")},startCountdown:function(){this.counting=!0},onCountdownEnd:function(){this.counting=!1},async confirmOtp(){try{const{otp:e}=this.form,s=await T("confirm-account-token");this.isLoading=!0;const{data:n}=await L.post("/auth/verify-otp",{otp:e},{headers:{Authorization:`Bearer ${s}`}});if(console.log(JSON.stringify(n)),n.success){this.$router.push({name:"login"}),p.success(n.message);return}else p.error(n.message);this.isLoading=!1}catch(e){this.isLoading=!1;const{data:s}=e.response;s.success||p.error(s.message)}},goBack(){this.$router.go(-1)}}});const _=e=>($("data-v-04a75758"),e=e(),q(),e),P={id:"password__reset__confirm__otp__page"},X={class:"container"},z=_(()=>o("div",null,null,-1)),D=_(()=>o("div",{class:"title"},[o("h1",null,"Confirm OTP"),o("p",{class:"sub__hero__text"},"Confirm the token sent to your email")],-1)),N={class:"error"},x={style:{"font-size":"13px"}},M={key:1,class:"goto__sign__up"},A={class:"goto__sign__up"};function F(e,s,n,U,j,G){const g=a("BaseTextInput"),h=a("Spinner"),w=a("BaseButton"),B=a("VueCountdown"),k=a("RouterLink");return d(),l("div",P,[o("div",X,[z,o("div",null,[D,o("small",N,c(e.apiResponseMsg),1),o("form",{action:"",method:"post",onSubmit:s[2]||(s[2]=O((...t)=>e.confirmOtp&&e.confirmOtp(...t),["prevent"]))},[r(g,{placeholder:"XXXXXX",label:"Token",modelValue:e.form.otp,"onUpdate:modelValue":s[0]||(s[0]=t=>e.form.otp=t),type:"text",maxlength:6,class:"field","input-attributes":e.inputFieldProps,disabled:e.counting||e.isLoading},null,8,["modelValue","input-attributes","disabled"]),r(w,{text:"",disabled:e.disabledState},{default:u(()=>[m(o("span",null,"Proceed",512),[[f,!e.isLoading]]),m(r(h,{"animation-duration":1e3,size:30,color:"#ffffff"},null,512),[[f,e.isLoading]])]),_:1},8,["disabled"]),e.counting?(d(),R(B,{key:0,time:6e4,onEnd:e.onCountdownEnd,style:{color:"var(--secondary)"}},{default:u(({seconds:t})=>[o("small",null,[i(" Request new OTP after "),o("strong",x,c(t),1),i(" seconds. ")])]),_:1},8,["onEnd"])):(d(),l("button",M,[i(" Didn't receive any token? "),o("small",{class:"emphasis",style:{"font-size":"13px"},onClick:s[1]||(s[1]=(...t)=>e.startCountdown&&e.startCountdown(...t))},"request new ")]))],32),o("button",A,[i(" Go back "),r(k,{to:{name:"sign-up"},class:"emphasis",style:{"font-size":"13px"}},{default:u(()=>[i("Sign Up ")]),_:1})])])])])}const W=I(E,[["render",F],["__scopeId","data-v-04a75758"]]);export{W as default};
